<!-- app/templates/index.html -->
{% extends "base.html" %}

{% block title %}Dashboard - w3tasq{% endblock %}

{% block content %}
<div class="header">
    <div>
        <h1>w3tasq - Web3 Task & Note Tracker</h1>
        <div class="welcome-text">
            Welcome to your personal task manager!
        </div>
    </div>
    <div class="user-info">
        <!-- Use custom filter to shorten wallet address -->
        <div>{{ user_address | shorten_wallet }}</div>
        <div style="margin-top: 10px;">
            <a href="#" id="logoutBtn" class="btn logout-btn">Logout</a>
        </div>
    </div>
</div>

<!-- Marquee for user messages -->
<div class="marquee-container">
    <div class="marquee-text">Task added successfully!</div>
    <div class="marquee-dummy">marquee text</div>
</div>

<!-- Navigation menu -->
<nav class="section-nav">
    <button id="showAddTaskBtn" class="nav-btn active">âž• Add Task</button>
    <button id="showTasksBtn" class="nav-btn">ðŸ“‹ My Tasks</button>
</nav>

<!-- Sections container -->
<div class="sections-container">
    <!-- Form for creating a new task -->
    <div id="addTaskSection" class="section active">
        <div class="task-form">
            <h3>Create New Task</h3>
            <form id="taskForm">
                <div class="form-group">
                    <label for="taskTitle">Task Title *</label>
                    <input type="text" id="taskTitle" class="form-control" placeholder="Enter task title" required>
                </div>

                <div class="form-group">
                    <label for="taskDescription">Description</label>
                    <textarea id="taskDescription" class="form-control" placeholder="Enter task description (optional)"
                        rows="2"></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="taskDeadline">Deadline (Optional)</label>
                        <input type="datetime-local" id="taskDeadline" class="form-control">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="taskPriority">Priority</label>
                        <select id="taskPriority" class="form-control">
                            <option value="3" selected>âšª Low Priority</option>
                            <option value="2">ðŸŸ¡ Medium Priority</option>
                            <option value="1">ðŸ”´ High Priority</option>
                        </select>
                    </div>

                    <div class="form-group align-end">
                        <button type="submit" class="btn">Add Task</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Tasks list -->
    <div id="tasksSection" class="section">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h3>Your Tasks</h3>
            <button id="loadTasksBtn" class="btn">ðŸ”„ Refresh</button>
        </div>
        <div id="tasksContainer">
            <p class="text-center">Click "Refresh" to load your tasks or switch back to "Add Task" mode.</p>
        </div>
    </div>
</div>
{% endblock %}